import pandas as pd
import re

# Load your REDCap data dictionary
data_dict = pd.read_csv("data_dictionary.csv")

# Identify relevant column(s)
choice_columns = ["Choices, Calculations, OR Slider Labels"]
choice_columns = [col for col in choice_columns if col in data_dict.columns]

# Set to store suppression terms
suppression_terms = set()

for col in choice_columns:
    for raw_entry in data_dict[col].dropna():
        # Split full choice string on '|'
        choices = [entry.strip() for entry in str(raw_entry).split("|")]

        for choice in choices:
            parts = choice.split(",", 1)
            if len(parts) == 2:
                value = parts[1].strip().lower()

                # Add the full value
                suppression_terms.add(value)

                # Split value into individual words, add each with trailing space
                for word in value.split():
                    suppression_terms.add(word + " ")  # helps suppress matches like "Stage III"



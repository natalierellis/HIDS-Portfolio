library(dplyr)

df <- df %>%
  mutate(
    histology = case_when(
      histology == "serous" & final_grade == "Grade 1" ~ "low-grade serous",
      histology == "serous" & final_grade %in% c("Grade 2", "Grade 3") ~ "high-grade serous",
      histology == "serous" & final_grade == "NOS" ~ "NOS serous",
      TRUE ~ histology  # leave others unchanged
    ),
    final_grade = case_when(
      histology == "low-grade serous" ~ "low-grade",
      histology == "high-grade serous" ~ "high-grade",
      histology == "NOS serous" ~ "NOS",
      TRUE ~ final_grade  # leave others unchanged
    )
  )


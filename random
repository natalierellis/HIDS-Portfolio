import pandas as pd
import re

# Load your REDCap data dictionary
data_dict = pd.read_csv("data_dictionary.csv")

# Combine relevant columns (REDCap uses inconsistent naming sometimes)
choice_columns = ["Choices, Calculations, OR Slider Labels"]
choice_columns = [col for col in choice_columns if col in data_dict.columns]

# Set to store unique suppression values
suppression_terms = set()

for col in choice_columns:
    for raw_entry in data_dict[col].dropna():
        # Example: "1, Low grade | 2, High grade | 3, Unknown"
        # Split on pipe
        choices = [entry.strip() for entry in str(raw_entry).split("|")]

        for choice in choices:
            # Extract value after the first comma
            parts = choice.split(",", 1)
            if len(parts) == 2:
                value = parts[1].strip().lower()
                suppression_terms.add(value)

